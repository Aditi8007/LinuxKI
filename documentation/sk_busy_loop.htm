<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:.5in .5in .5in .5in;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-GB link="#0563C1" vlink="#954F72">

<div class=WordSection1>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;text-align:
justify;vertical-align:top'><b><i><span lang=EN-US style='font-size:12.0pt;
font-family:"Arial",sans-serif;color:black'>LinuxKI Warning</span></i></b></p>

<p class=MsoNormal align=center style='margin-bottom:0in;margin-bottom:.0001pt;
text-align:center;line-height:11.25pt;vertical-align:top'><b><span lang=EN-US
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:black'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&#8203;&#8203;&#8203;&#8203;Network-latency
tuned profile may increase System CPU usage and decrease overall performance </span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>03/30/2017</span></p>

<p class=MsoNormal align=center style='margin-bottom:0in;margin-bottom:.0001pt;
text-align:center;line-height:11.25pt;vertical-align:top'><span lang=EN-US
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>Problem</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>The&nbsp;network-latency tuned profile
was&nbsp;introduced in RHEL 7.0.&nbsp; &nbsp;It is a superset of the
latency-performance tuned profile with some additional parameter settings as
seen below.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>#</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'># tuned configuration</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>#</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>[main]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>summary=Optimize for deterministic performance at the cost
of increased power consumption, focused on low latency network performance</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black;background:yellow'>include=latency-performance</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>[vm]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>transparent_hugepages=never</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>[sysctl]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>net.core.busy_read=50</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>net.core.busy_poll=50</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>net.ipv4.tcp_fastopen=3</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>kernel.numa_balancing=0</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'><br>
</span><span lang=EN-US style='font-size:10.0pt;font-family:"Arial",sans-serif;
color:black'>Since the network-latency profile also disables transparent
hugepages and sets the kernel.numa_balancing parameter to 0, some customer may
be tempted to use the network-latency profile where the latency-performance
profile was used in the past.   Not to mention, who doesn’t want low latency?</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>However, the network-latency tuned profile also
sets the net.core.busy_read and net.core.busy_poll parameters to 50, which can
increase the overall System CPU usage and subsequently decrease overall performance
in traditional OLTP workloads, such as Oracle and other transactional DB
workloads.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>Note also that the busy_read and busy_poll
parameters were introduced in Linux versions 3.11 and later, which includes
SLES 12 and was also brought into RHEL 7. </span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><b><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>Investigation</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>In a recent OLTP benchmark using Oracle RAC
database on RHEL 7.3, the customer was concerned that System CPU time was
around 10-20% and overall throughput was lower than expected.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>LinuxKI data was taken for analysis.&nbsp;
&nbsp;For example:</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>$ cd /dev/mem&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>$ runki&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>The CPU Profiling Report (kiprof*.txt) showed
that 12% of the CPU profile hits occurred in kernel (system) code.&nbsp; &nbsp;
Note that this doesn't include Interrupt profile hits:</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>******** GLOBAL HARDCLOCK REPORT ********</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; Count&nbsp; &nbsp;USER%&nbsp; &nbsp; SYS%&nbsp;
&nbsp;INTR%&nbsp; &nbsp;IDLE%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp;151170&nbsp; 73.30%&nbsp; 12.06%&nbsp; 14.62%&nbsp;
&nbsp;0.02%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>Kernel Functions executed during profile</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp;Count&nbsp; &nbsp; &nbsp;Pct&nbsp;
State&nbsp; Function</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; 111273&nbsp; 73.61%&nbsp; USER&nbsp; &nbsp;UNKNOWN</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black;background:yellow'>&nbsp; &nbsp; 8795&nbsp;
&nbsp;5.82%&nbsp; SYS&nbsp; &nbsp; sk_busy_loop</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; 4910&nbsp; &nbsp;3.25%&nbsp; INTR&nbsp;
&nbsp;tcp_recvmsg</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black;background:yellow'>&nbsp; &nbsp; 3034&nbsp;
&nbsp;2.01%&nbsp; SYS&nbsp; &nbsp; sched_clock</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black;background:yellow'>&nbsp; &nbsp; 2998&nbsp;
&nbsp;1.98%&nbsp; INTR&nbsp; &nbsp;ixgbe_busy_poll_recv</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; 2742&nbsp; &nbsp;1.81%&nbsp; SYS&nbsp;
&nbsp; __schedule</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; 1425&nbsp; &nbsp;0.94%&nbsp; INTR&nbsp;
&nbsp;__wake_up_sync_key</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; 1412&nbsp; &nbsp;0.93%&nbsp; INTR&nbsp;
&nbsp;call_softirq</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; &nbsp;922&nbsp; &nbsp;0.61%&nbsp; INTR&nbsp;
&nbsp;net_rx_action</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; &nbsp;856&nbsp; &nbsp;0.57%&nbsp; SYS&nbsp;
&nbsp; __alloc_pages_nodemask</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black;background:yellow'>&nbsp; &nbsp; &nbsp;731&nbsp;
&nbsp;0.48%&nbsp; SYS&nbsp; &nbsp; local_clock</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp; &nbsp;558&nbsp; &nbsp;0.37%&nbsp; SYS&nbsp;
&nbsp; syscall_trace_leave</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>non-idle GLOBAL HARDCLOCK STACK TRACES (sort by count):</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>&nbsp; &nbsp;Count&nbsp; &nbsp; &nbsp;Pct&nbsp; Stack
trace</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
Courier;color:black'>============================================================</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 8794&nbsp; &nbsp;5.82%&nbsp;&nbsp;<span
style='background:yellow'>sk_busy_loop</span>&nbsp; tcp_recvmsg&nbsp;
inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp; sock_aio_read&nbsp;
do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 4910&nbsp; &nbsp;3.25%&nbsp;
tcp_recvmsg&nbsp; inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp;
sock_aio_read&nbsp; do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 3010&nbsp; &nbsp;1.99%&nbsp;
sched_clock&nbsp; local_clock&nbsp;&nbsp;<span style='background:yellow'>sk_busy_loop</span>&nbsp;
tcp_recvmsg&nbsp; inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp;
sock_aio_read&nbsp; do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 2998&nbsp; &nbsp;1.98%&nbsp;
ixgbe_busy_poll_recv&nbsp;&nbsp;</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Courier New";color:#444444;background:yellow'>sk_busy_loop</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Courier New";color:black'>&nbsp;&nbsp;tcp_recvmsg&nbsp;
inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp; sock_aio_read&nbsp;
do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 1759&nbsp; &nbsp;1.16%&nbsp;
__schedule&nbsp; schedule&nbsp; schedule_timeout&nbsp; sk_wait_data&nbsp;
tcp_recvmsg&nbsp; inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp;
sock_aio_read&nbsp; do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 1193&nbsp; &nbsp;0.79%&nbsp;
call_softirq&nbsp; do_softirq&nbsp; irq_exit&nbsp; __irqentry_text_start&nbsp;
ret_from_intr</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; 1128&nbsp; &nbsp;0.75%&nbsp;
__wake_up_sync_key&nbsp; tcp_prequeue&nbsp; tcp_v4_rcv&nbsp;
ip_local_deliver_finish&nbsp; ip_local_deliver&nbsp; ip_rcv_finish&nbsp;
ip_rcv&nbsp; __netif_receive_skb_core&nbsp; __netif_receive_skb&nbsp;
netif_receive_skb_internal&nbsp; napi_gro_receive&nbsp;
ixgbe_clean_rx_irq&nbsp; ixgbe_poll&nbsp; net_rx_action&nbsp;
__do_softirq&nbsp; call_softirq</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; &nbsp;802&nbsp; &nbsp;0.53%&nbsp;
__schedule&nbsp; schedule_user&nbsp; retint_careful</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; &nbsp;725&nbsp; &nbsp;0.48%&nbsp;
local_clock&nbsp;&nbsp;<span style='background:yellow'>sk_busy_loop</span>&nbsp;
tcp_recvmsg&nbsp; inet_recvmsg&nbsp; sock_aio_read.part.7&nbsp;
sock_aio_read&nbsp; do_sync_read&nbsp; vfs_read&nbsp; sys_read&nbsp; tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; &nbsp;673&nbsp; &nbsp;0.45%&nbsp;
net_rx_action&nbsp; __do_softirq&nbsp; call_softirq&nbsp; do_softirq&nbsp;
irq_exit&nbsp; __irqentry_text_start&nbsp; ret_from_intr</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp; &nbsp; &nbsp;602&nbsp; &nbsp;0.40%&nbsp;
__alloc_pages_nodemask&nbsp; alloc_pages_vma&nbsp; handle_mm_fault&nbsp;
__do_page_fault&nbsp; do_page_fault&nbsp; page_fault</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'><br>
<br>
</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>Note that most of the System profile hits occur
in the context of the sk_busy_loop() function.&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>The busy_poll/busy_read parameters will cause
the select(), poll(), or socket read() to loop in the sk_busy_loop function
until network data is received on the socket queue, or until the
busy_poll/busy_read timeout expires (in microseconds).    </span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>If the network-latency tuned profile is used,
then sk_busy_loop()  may loop for 50 microseconds.   While 50 microseconds does
not sound like a lot of time, it can add up if there are many TCP
connections.    Also, if it typically takes longer than 50 microseconds to
receive data on the sockets, then the additional CPU is still used and the
process still goes to sleep, resulting in no benefit from the polling along the
increased CPU overhead.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>The LinuxKI Toolset can help you identify if
setting busy_poll/busy_read might help or hurt.   Based on the Network Activity
Report (kisock.*.txt) below, you can see the average socket read() time is
1.237 milliseconds, which is much more than the 50 microseconds for
busy_poll():</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>Local IP Statistics</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>==================================================</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>L=10.14.26.27   Syscalls: 9018955</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>System Call Name     Count     Rate    
ElpTime        <span style='background:yellow'>Avg</span>        Max    Errs   
AvSz     KB/s</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>read               4209500 210473.2 5208.657345   <span
style='background:yellow'>0.001237</span>  11.948590      23     235  48505.6</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>write              4808199 240407.9   34.068338  
0.000007   0.033348       0    1516 356102.7</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>writev                1256     62.8    0.011227  
0.000009   0.000062       0   10923    669.9</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-family:"Arial",sans-serif;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>Of course, 1.237 milliseconds is only an
average, and we may have different sockets for different purposes.  With
busy_poll/busy_read set to 50, the processes can be analyzed using the PID
Analysis Report (kipid.*.txt) to see how often they actually go to sleep
waiting on the network data.   Below is sample data for one of the Oracle
processes.   </span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'> </span><span lang=EN-US style='font-size:9.0pt;
font-family:"Courier New";color:black'>PID 22781  oracleEPH001</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    ********* SCHEDULER ACTIVITY REPORT ********</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    RunTime    :  6.271904  <span style='background:
yellow'>SysTime   :  3.276771</span>   UserTime   :  2.757877</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    SleepTime  :  8.227489  Sleep Cnt :     47729  
Wakeup Cnt :       284</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    RunQTime   :  5.500701  Switch Cnt:     51376  
PreemptCnt :      3647</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    HardIRQ    :  0.022136  HardIRQ-S :  0.012025   
HardIRQ-U :  0.010111</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    SoftIRQ    :  0.215121  SoftIRQ-S :  0.114559   
SoftIRQ-U :  0.100562</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    Last CPU   :        54  CPU Migrs :        14  
NODE Migrs :         0</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    Policy     : SCHED_NORMAL     vss : 
90155761          rss :      8644</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    busy    :     31.36%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>      sys   :     16.38%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>      user  :     13.79%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>      irq   :      1.19%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    runQ    :     27.50%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    sleep   :     41.14%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>...</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    ******** CPU ACTIVITY REPORT ********</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    The percentages below reflect the percentage</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    of the Thread's total RunTime spent in either</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    User code or System code</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    RunTime:   6.2719</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>      Count    USER     SYS    INTR</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>        562     198     174     190</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>              35.23%  30.96%  33.81%</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    HARDCLOCK entries</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       Count     Pct  State  Function</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          <span style='background:yellow'>89 
15.84%  INTR   sk_busy_loop</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          59  10.50%  SYS    tcp_recvmsg</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          <span style='background:yellow'>49  
8.72%  SYS    sched_clock</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          <span style='background:yellow'>44  
7.83%  INTR   ixgbe_busy_poll_recv</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          16   2.85%  SYS    __schedule</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          14   2.49%  USER   kcbgtcr
[/oracle/EPH/12102/bin/oracle]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          <span style='background:yellow'>10  
1.78%  SYS    local_clock</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>           9   1.60%  INTR   __wake_up_sync_key</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>           8   1.42%  USER   opiexe
[/oracle/EPH/12102/bin/oracle]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>...</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    ******** FILE ACTIVITY REPORT ********</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    FD: 19 IPv4     TCP
10.14.26.27:1527-&gt;10.14.27.28:17696 (ESTABLISHED)</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    System Call Name     Count     Rate    
ElpTime        Avg        Max    Errs    AvSz     KB/s</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    read                 <span style='background:
yellow'>48697</span>   2434.8   15.692413   0.000322   1.014531       0    
230    549.1</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       SLEEP             <span style='background:
yellow'>47642</span>   2382.1    7.392777   0.000155</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>          Sleep Func     47641            
7.392777   0.000155   1.014460  sk_wait_data</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       RUNQ                                5.226376</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       <span style='background:yellow'>CPU                                
3.073316</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    write                51994   2599.7   
0.355760   0.000007   0.001040       0    1117   2837.9</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       RUNQ                                0.026644</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>       CPU                                 0.329116</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:black'>    writev                   7      0.3   
0.000039   0.000006   0.000012       0    5177      1.8</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;background:white'><span lang=EN-US style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:black'> </span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>In the data above, we can see a lot
of CPU time spent in sk_busy_loop() and its relative functions</span><span
lang=EN-US> </span><span lang=EN-US style='font-size:10.0pt;font-family:"Arial",sans-serif;
color:black'>such as sched_clock(), ixgbe_busy_poll_recv() and local_clock(). .   
But notice that out of 48697 read() system calls on the socket, 47642 of those
read() system calls (97.8%) resulted in the process going to sleep.   So most
of the CPU used by the read() system call is unnecessary.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>Summary</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>The network-latency tuned profile 
should not be used unless the application has been verified to be network latency
sensitive.   Also, the net.core busy_loop/busy_read parameters should remain at
0 unless a network sensitive application is used.    In a network latency
sensitive application, the network socket data would most often be received in
less than busy_poll/busy_read microseconds from when the select(), poll(),
read() or related system call is made.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>The LinuxKI toolset Kparse Report
will now issue a warning if the sk_busy_loop() function is detected as using
more than 0.5% of the CPU.   For example:</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#FFD1A4'>
 <tr>
  <td style='padding:1.5pt 2.25pt 1.5pt 2.25pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='font-size:12.0pt;font-family:"Times New Roman",serif'>1.4.3 Report of
  non-idle kernel functions at each clock tick</span></b></p>
  <p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
  normal'><u><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
  color:blue'><a
  href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#subsection1.4.2"><span
  style='color:blue'>[Prev Subsection]</span></a><a
  href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#subsection1.4.4"><span
  style='color:blue'>[Next Subsection]</span></a><a
  href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#Section1"><span
  style='color:blue'>---[Prev Section]</span></a><a
  href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#Section2"><span
  style='color:blue'>[Next Section]</span></a><a
  href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#TOC"><span
  style='color:blue'>[Table of Contents]</span></a></span></u></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><b><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>   Count     Pct  Function </span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>  111273  73.61%  USER   0xffffffffffffffff</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:#CC0000'>    8795   5.82%  SYS    sk_busy_loop</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>    4910   3.25%  INTR   tcp_recvmsg</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>    3034   2.01%  SYS    sched_clock</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>    2998   1.98%  INTR   ixgbe_busy_poll_recv</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>    2742   1.81%  SYS    __schedule</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>    1425   0.94%  INTR   __wake_up_sync_key</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>    1412   0.93%  INTR   call_softirq</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     922   0.61%  INTR   net_rx_action</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     856   0.57%  SYS    __alloc_pages_nodemask</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     731   0.48%  SYS    local_clock</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     558   0.37%  SYS    syscall_trace_leave</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     527   0.35%  INTR   __do_softirq</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     495   0.33%  INTR   ixgbe_poll</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     466   0.31%  INTR   tcp_rcv_established</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     317   0.21%  INTR   ixgbe_xmit_frame</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     316   0.21%  SYS    tracesys</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     313   0.21%  INTR   mod_timer</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black;background:#EEEEEE'>     277   0.18%  SYS    syscall_trace_enter</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-size:9.0pt;font-family:"Courier New";
color:black'>     ...</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal'><a name=warncheck1></a><span lang=EN-US style='font-size:9.0pt;
font-family:"Courier New";color:#CC0000'>Warning: Suspect network-latency tuned
profile used </span><u><span lang=EN-US style='font-size:9.0pt;font-family:
"Courier New";color:blue'><a
href="http://htmlpreview.github.io/?https://github.com/HewlettPackard/LinuxKI/blob/master/documentation/sk_busy_loop.htm"
target="_blank"><span style='color:blue'>[INFO]</span></a><a
href="http://gse-rose-st068.us.hpecorp.net/work/mcr/HKMC/0918_loadrunner_stress_test/herppd00/0918_1313/kp.0918_1313.html#warncheck2"><span
style='color:blue'>[Next]</span></a></span></u></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>If you see this warning, you should
verify whether or not the applications are benefiting from busy polling by
examining the average poll(), select() or socket read times as well as the
number of times the processes go to sleep in the related system calls.</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>For more information, refer to the
following Redhat documentation:</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span class=MsoHyperlink><span lang=EN-US
style='font-size:10.0pt;font-family:"Arial",sans-serif'><a
href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/sect-red_hat_enterprise_linux-performance_tuning_guide-networking-configuration_tools">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/sect-red_hat_enterprise_linux-performance_tuning_guide-networking-configuration_tools</a></span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
11.25pt;vertical-align:top'><span lang=EN-US style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:black'>&nbsp;</span></p>

</div>

</body>

</html>
